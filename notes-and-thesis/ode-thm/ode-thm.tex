\chapter{Calculus in Metric Spaces}
\section{Introduction}
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				Notation
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%
%


Our goal will be to prove the following.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				Existence Theorem
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{theorem}[Metric Space ODE Theorem]
	\label{ode-thm}
  Let $X$ be a topological vector space over $\rr$
  with topology induced by a metric $d$, $E \subset X$ open, $\vp \in E$, and $(-a, a)$ an
	open interval in $\rr$. If $f: (-a, a) \times E \to X$ satisfies the
	inequality
	%
	%
	\begin{equation}
		\label{stronger-ode}
		\begin{split}
      d[f(t, x), f(t, y)] \le c d(x, y), \qquad \forall t \in (-a, a),
			\qquad \forall x, y \in E,
		\end{split}
	\end{equation}
	%
  then for sufficiently small $h > 0$ there exists a unique
	differentiable map $u: (-h, h) \to E$ such that for all $t \in (-h, h)$
	%
	%
	\begin{gather}
    \label{ode-thm-eq}
			u'(t) = f(t, u(t)),
			\\
      \label{ode-thm-init-data}
			u(0) = \vp.
	\end{gather}
\end{theorem}
%
%
Notice that \autoref{ode-thm} is a 
generalization of the following classical result.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				 Picard-Lindelof
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{theorem}[Picard-Lindel\"{o}f]
	Let $f(t, x)$ be a continuous function on $(- a, a) \times (- b,
	b)$ such that
	%
	%
	\begin{equation*}
		\begin{split}
			| f(t, x) - f(t, y) | \le c| x - y |, \quad \forall t \in (-a, a),
			\quad \forall x,y \in (- b, b).
		\end{split}
	\end{equation*}
	%
	%
	Then for any $\xi \in (-b, b)$ there exists an interval $(-h, h)
	\subset (-a, a)$ such that the initial value problem
	%
	%
	\begin{gather}
			\frac{dx}{dt} = f(t, x(t)),
			\\
			x(0) = \xi 
	\end{gather}
	%
	%
	has a unique solution $x(t)$ for all $t \in (-h, h)$.
	%
	%
	\end{theorem}
To prove \autoref{ode-thm}, we will first define
integration over Banach space. (To extend the theory of integration
to arbitrary complete topological vector spaces with topology induced by a
metric, one need
only replace norms with metrics in the definitions. We leave this to the
reader.) Then we will rewrite
\eqref{ode-thm-eq} as an integral equation. A fixed point argument will complete
the proof. These notes are heavily influenced by a
number of excellent books, among them Dieudonn{\'e}
\cite{Dieudonne_1969_Foundations-of-}, Yosida \cite{Yosida:1980fk},
Folland \cite{Folland_1999_Real-analysis}, Jost
\cite{Jost-1998-Postmodern-analysis}, Rudin \cite{Rudin:1976uq}, and Knapp
\cite{Knapp:2005rm}-\cite{Knapp:2005yg}.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				 Differentiaion in Banach Spaces
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				 Integration in Banach Spaces
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\section{Integration in Banach Spaces}
\label{sec:int-banach}
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				Definition of step functions
%
%
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				Definition of step function
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{definition}
	A mapping $f:[a,b] \to X$ is a \emph{step-function} if there exists a disjoint
	partitioning $\left\{ (t_{j}, t_{j+1}) \right\}$ of $[a,b]$ such that
	%
	%
	\begin{equation}
		\label{step-function}
		\begin{split}
			f(t)=\sum_{j=0}^{n-1} {\alpha_j} \chi_{(t_{j}, t_{j+1})}.
		\end{split}
	\end{equation}
	%
	%
\end{definition}
%
%
\begin{framed}
\begin{example}
	The map $f:[-1,1] \to L^2(\rr)$ given by 
	%
	%
	\begin{equation*}
		\begin{split}
			f(t) = 
			\begin{cases}
				 e^{-x^2},  \quad & -1 \le t\le0 \\
				 e^{-2x^2},  \quad & \phantom - 0 < t \le 1 \\
				 0,  \quad & \phantom - \text{otherwise}
			\end{cases}
		\end{split}
	\end{equation*}
	%
	%
	is a step-function.
	\end{example}
\end{framed}
%
%
\begin{definition}[Banach Space Integration for Step Functions]
	Let $X$ be a Banach space, $f: [a,b] \to
	X$ a step function as in \eqref{step-function}. 
	Then 
	%
	\begin{equation*}
		\begin{split}
      \int_a^b f(t) dt \doteq \sum_{j=0}^{n-1} \alpha_j (t_{j+1} - t_{j}).
    \end{split}
	\end{equation*}
	%
	%
%
\end{definition}
%
%
Note that this definition is independent of the partitioning we use for $f$, due
to the following lemma.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                Indpendence of Partioning
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}
For step functions $f, g$, we have
%
%
\begin{equation*}
\begin{split}
  \int_{a}^{b} f(t) dt - \int_{a}^{b} g(t) dt = \int_{a}^{b}\left[ f(t) - g(t) \right]dt.
\end{split}
\end{equation*}
%
%
\label{lem:indep-part}
\end{lemma}
%
%
\begin{proof}
%
Let
%
\begin{equation*}
\begin{split}
  & f = \sum_{j=1}^{m}\alpha_{j} \chi_{(t_{j}, t_{j+1})}
  \\
  & g = \sum_{k =1}^{n}
  \beta_{k} \chi_{(s_{k}, s_{k+1})}
\end{split}
\end{equation*}
%
and assume without loss of generality that $n \ge m$. 
Then
%
%
\begin{equation*}
\begin{split}
  f(t) - g(t) = \sum_{p=1}^{m+n} \gamma_{p} \chi_{(y_{p}, y_{p+1})} 
\end{split}
\end{equation*}
%
%
where
\begin{equation*}
  \begin{split}
    \gamma_{p} \chi_{(y_{p}, y_{p+1}) } = 
    \begin{cases}
      \alpha_{p} \chi_{(t_{p}, t_{p+1})}
, \quad & 1 \le p \le m \\
-\beta_{p-m} \chi_{(s_{p-m}, s_{p-m+1})}, \quad & m < p \le m+n.
\end{cases}
\end{split}
\end{equation*}
Then
%
%
%
\begin{equation*}
\begin{split}
  \int_{a}^{b}\left[ f(t) - g(t) \right]dt
  & = \sum_{p=1}^{m+n}
  \gamma_{p}(y_{p+1} - y_{p})
  \\
  & = \sum_{p=1}^{m} \alpha_{p}(t_{p+1} - t_{p}) +
  \sum_{p=m+1}^{m+n}-\beta_{p-m}(s_{p-m+1} - s_{p-m})
  \\
  & = \sum_{j=1}^{m}\alpha_{j}(t_{j+1} - t_{j}) -
  \sum_{k=1}^{n}\beta_{k}(s_{k+1} - s_{k})
  \\
  & = \int_{a}^{b}f(t)dt - \int_{a}^{b} g(t) dt.
\end{split}
\end{equation*}
%
%
%
%
\end{proof}
%
We are now interested in extending integration to a larger class of functions. We will need the
following. %
%
\begin{lemma}
	\label{lem:dense}
	Let $X$ be a Banach space, and
	suppose the function $f:[a,b] \to X$ is continuous. Then
	there exists a sequence of step functions $\left\{ f_n \right\}$
	such that $\|f - f_n\|_{L^\infty( [a,b], X)} \to 0$. 
\end{lemma}
%
%
\begin{proof}
  Fix $n \in \mathbb{N}$. Since $f$ is continuous, for every $t \in
\left[ a,b \right]$ there exists an open interval $V_t \subset [a,b]$ containing
$t$ such that
$\|f(x) - f(y)) \|_X \le 1/n$ for all $x, y \in V_t$. Note that $\left\{ V_t
\right\}_{t \in \left[ a,b \right]}$ is an open cover of $[a,b]$. We assume
without loss of generality that this cover is disjoint (since for any two
intervals $A$ and $B$ which overlap, we can replace $A$ with $A \setminus
B$ and still remain with an open cover of $[a,b]$). 
Due to the compactness of $[a,b]$, we can extract
a finite subcover $\left\{ (t_j, t_{j +1}) \right\}$ of $[a,b]$. This subcover
will be disjoint, since the original covering of $[a,b]$ was assumed to be
disjoint. For each interval $(t_j, t_{j +1})$
choose any $t_{j}^* \in (t_{j}, t_{j +1})$, and define the step-function
%
%
\begin{equation*}
	\begin{split}
		f_n(t) =
		\begin{cases}
      f(t_{j}^{*}), \quad & t \in (t_{j},t_{j+1}) 
		\\
		0 & \text{otherwise}.
	\end{cases}
	\end{split}
\end{equation*}
%
Fix $t \in [a,b]$. By construction, $t \in (t_{j}, t_{j+1})$ for some $j$.
Furthermore, since $\{(t_{j}, t_{j+1}) \} \subset \{V_{t}\}_{t \in [a,b]}$, we must have $(t_{j}, t_{j+1}) = V_{t}$. Hence
%
\begin{equation*}
	\begin{split}
		\|f(t)-f_n(t)\|_X
    & = \| f(t) - f(t_{j}^{*}) + f(t_{j}^{*}) - f_{n}(t)  \|_{X}
    \\
    & \le \| f(t) - f(t_{j}^{*}) \|_{X} + \| f(t_{j}^{*}) - f_{n}(t) \|_{X}
    \\
    & = \| f(t) - f(t_{j}^{*}) \|_{X}
    \\
    & \le \frac{1}{n}.
	\end{split}
\end{equation*}
%
%
Since $t$ was chosen arbitrarily, the proof is complete. 
\end{proof}
%
\begin{framed}
\begin{remark}
  \label{rem:unif}
If $f_{n}: [a,b] \to X$ is any sequence of step functions converging pointwise
in $t$ to $f$ in $X$, it converges \emph{uniformly} in $t$, due to the
compactness of $[a,b]$. 
\end{remark}
\end{framed}
%
\begin{definition}[Banach Space Integration for Continuous Functions]
  \label{def:banach}
  Let $X$ be a Banach space, $f: [a,b] \to X$ continuous, and $f_{n} \to f$ in
  $L^{\infty}([a,b], X)$. Then 
  %
  %
  \begin{equation*}
  \begin{split}
    \int_{a}^{b} f(t) dt \doteq \lim_{n \to \infty} \int_{a}^{b} f_{n}(t) dt
  \end{split}
  \end{equation*}
  %
  %
%
where the convergence is in the topology of $X$. 
\end{definition}
We now show that this
definition for Banach space integration is
well-defined. More precisely, we will first show that $\int_{a}^{b}
f_{n}(t) dt$ is Cauchy in $X$. Then, we will show the convergence is independent
of the step functions chosen. Proceeding, we first prove the following lemma.
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                tri inequality
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}
  For a step function $f: [a,b] \to X$, we have
  %
  %
  \begin{equation*}
  \begin{split}
    \| \int_{a}^{b} f(t) dt \|_{X} \le \int_{a}^{b} \| f(t) \|_{X} dt.
  \end{split}
  \end{equation*}
  %
  %
\label{lem:tri-ineq-int}
\end{lemma}
%
%
%
%
\begin{proof}
%
%
\begin{equation*}
\begin{split}
  \| \int_{a}^{b} f(t) dt \|_{X} &
  = \| \sum_{j=1}^{m}\alpha_{j} (t_{j+1} - t_{j})
  \|_{X}
  \\
  & \le  \sum_{j=1}^{m} \| \alpha_{j} \|_{X} (t_{j+1} - t_{j})
  \\
  & = \int_{a}^{b} \sum_{j=1}^{m} \chi_{[t_{j}, t_{j+1}]} \| \alpha_{j} \|_{X} dt
  \\
  & = \int_{a}^{b} \| \sum_{j=1}^{m} \alpha_{j} \chi_{[t_{j}, t_{j+1}]}(t)
  \|_{X}dt \quad \text{(the intervals $[t_{j}, t_{j+1}]$ are disjoint)} 
  \\
  & = \int_{a}^{b} \| f(t) \|_{X} dt
\end{split}
\end{equation*}
%
which completes the proof.
%
\end{proof}
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                uniqueness
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
Definition \ref{def:banach} is then well-defined due to the following two
lemmas.
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                conv
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}[Convergence] Let $f_{n}: [a,b] \to X$ be a sequence of simple
  functions converging to $f$ in $L^{\infty}([a,b], X)$. Then
  %
  %
  \begin{equation*}
  \begin{split}
    \int_{a}^{b}f_{n}(t) dt
  \end{split}
  \end{equation*}
  %
  %
  is Cauchy in $X$. 
\label{lem:conv}
\end{lemma}
%
%
%
%
\begin{proof}
  \begin{equation}
    \begin{split}
  \| \int_{a}^{b} f_{n}(t) dt - \int_{a}^{b} f_{m}(t) dt \|_{X}
  & = \| \int_{a}^{b}\left[ f_{n}(t) - f_{m}(t) \right]dt \|_{X}, \quad \text{Lemma
  \ref{lem:indep-part}}
  \\
  & \le \int_{a}^{b} \| f_{n}(t) - f_{m}(t) \|_{X} dt,
  \quad \phantom{m} \text{Lemma \ref{lem:tri-ineq-int}}
  \\
  & \le \int_{a}^{b} (\| f(t) - f_{n}(t) \|_{X} + \| f(t) - f_{m}(t) \|_{X})dt.
\end{split}
\end{equation}
%
Fix $\ee$. By Remark \ref{rem:unif}, we see that there exists $N$ such
that for $m, n > N$
%
%
\begin{equation*}
\begin{split}
& \| f(t) - f_{n}(t) \|_{X} \le \ee, \quad \forall t \in [a, b].
\\
& \| f(t) - f_{m}(t) \|_{X} \le \ee, \quad \forall t \in [a, b].
\end{split}
\end{equation*}
Hence,
%
%
\begin{equation*}
\begin{split}
\| \int_{a}^{b} f_{n}(t) dt - \int_{a}^{b} f_{m}(t) dt \|_{X} \le 2(b-a) \ee,
\quad m,n > N.
\end{split}
\end{equation*}
%
Since $\ee$ can be chosen arbitrarily small, the proof is complete.
\end{proof}
%
%
\begin{lemma}[Independence]
  Let $f_{n}(t)$, $g_{n}(t) : [a,b] \to X$
  be two step functions converging to $f$ in $L^{\infty}([a,b], X)$.
  If
  %
  %
  \begin{equation*}
  \begin{split}
    & \int_{a}^{b} f_{n}(t) dt \xrightarrow{X} F
    \\
    & \int_{a}^{b} g_{n}(t) dt \xrightarrow{X} G
  \end{split}
  \end{equation*}
  %
  %
  then
  %
  %
  \begin{equation*}
  \begin{split}
    F =G.
  \end{split}
  \end{equation*}
  %
  %
\label{lem:well-def}
\end{lemma}
%
%
%
%
%
%
\begin{proof}
%
%
\begin{equation*}
\begin{split}
  \| F - G \|_{X} & = \| \int_{a}^{b} f(t) dt - \int_{a}^{b} g(t) dt \|_{X}
  \\
  & = \| \int_{a}^{b}\left[ f(t) - g(t) \right]dt \|_{X}, \quad \text{Lemma
  \ref{lem:indep-part}}
  \\
  & \le \int_{a}^{b} \| f(t) - g(t) \|_{X} dt,
  \quad \phantom{m} \text{Lemma \ref{lem:tri-ineq-int}}
  \\
  & \le \int_{a}^{b} (\| f(t) - f_{n}(t) \|_{X} + \| f(t) - g_{n}(t) \|_{X})dt.
\end{split}
\end{equation*}
%
%
Fix $\ee$. By Remark \ref{rem:unif}, we see that there exists $N$ such
that for $n > N$
%
%
\begin{equation*}
\begin{split}
& \| f(t) - f_{n}(t) \|_{X} \le \ee, \quad \forall t \in [a, b]
\\
& \| f(t) - g_{n}(t) \|_{X} \le \ee, \quad \forall t \in [a, b].
\end{split}
\end{equation*}
%
%
Hence
%
%
\begin{equation*}
\begin{split}
\| F - G \|_{X} \le 2(b-a) \ee.
\end{split}
\end{equation*}
%
%
Since $\ee$ can be chosen arbitrarily small, we see that we must have $F = G$.
\end{proof}
%
%
We conclude the section by proving the fundamental theorem of calculus, 
thereby establishing that Banach space integration and
differentiation are inverse operations. We shall need the following lemma.
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                int prop
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}
  Let $X$ be a Banach space, and suppose $f: [a,b] \to X$ is continuous. Then for
  $a \le b \le c$ 
%
%
\begin{equation*}
\begin{split}
  \int_{a}^{c} f(t) dt = \int_{a}^{b} f(t) dt + \int_{b}^{c} f(t) dt.
\end{split}
\end{equation*}
%
%
\label{lem:int-splitting}
\end{lemma}
%
%
%
%
\begin{proof}
  %
  Since $\| f - f_{n} \|_{L^{\infty}\left( [a,b], X \right)} \to 0$ for some sequence
  $f_{n}$ of simple functions, we have
  %
  \begin{equation*}
  \begin{split}
    \int_{a}^{c} f(t) dt = \lim_{n \to \infty} \int_{a}^{c} f_{n}(t) dt.
  \end{split}
  \end{equation*}
  %
  %
  Recall that the value of $\int_{a}^{c}f_{n}(t) dt$ does not depend upon the
  partioning we use for $f_{n}(t)$. Partition $f_{n}$ such that
  \begin{equation}
    \begin{split}
  & f_{n}(t) = f_{n, [a,b]} + f_{n, (b, c]},  
    \\
    & f_{n, [a,b]}(t) =0, \quad b< t \le c, \quad f_{n, (b, c]}(t) = 0, \quad
    a \le t \le b.
\end{split}
\end{equation}
Then
  %
  %
  \begin{equation*}
  \begin{split}
    \int_{a}^{c} f_{n}(t) dt & = \int_{a}^{c} f_{n, [a,b]}(t)dt  +
    \int_{a}^{c} f_{n, (b,c]}(t)dt 
    \\
    & = \int_{a}^{b} f_{n}(t)dt  +
    \int_{b}^{c} f_{n}(t)dt.
  \end{split}
  \end{equation*}
  %
  %
Hence 
 %
 %
 \begin{equation*}
 \begin{split}
   \int_{a}^{c} f(t) dt 
   & = \lim_{n \to \infty} \int_{a}^{c} f_{n}(t) dt
   \\
   &= \lim_{n \to \infty} \left ( \int_{a}^{b} f_{n}(t)dt  +
    \int_{b}^{c} f_{n}(t)dt \right )
    \\
    & =\int_{a}^{b} f(t) dt + \int_{b}^{c} f(t) dt
 \end{split}
 \end{equation*}
 %
 %
which concludes the proof.
\end{proof}
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                FTC
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}[Fundamental Theorem of Calculus]
Let $f \in C\left( [a,b], X \right)$, where $X$ is a Banach space. For $a \le x
\le b$, let
%
%
\begin{equation*}
\begin{split}
  F(t) = \int_{a}^{t}f(s)ds.
\end{split}
\end{equation*}
%
%
Then $F$ is differentiable at all $t_{0} \in [a,b]$, and
%
%
\begin{equation}
  \label{fund-thm-calc-diff}
\begin{split}
  F'(t_{0})= f(t_{0}).
\end{split}
\end{equation}
\label{lem:fund-thm-calc}
\end{lemma}
%
%
%
%
\begin{proof}
We apply the definition of Banach space
differentiation given in \eqref{diff-limit-simp} and see that
%
%
\begin{equation*}
\begin{split}
   \| \frac{F(t_{0} + h) - F(t_{0})}{h}  - f(t_{0}) \|_{X}
  & = \| \frac{\int_{a}^{t_{0}+h}f(s)ds - \int_{a}^{t_{0}}f(s)ds}{h} -
  f(t_{0}) \|_{X}
  \\
  & = \| \int_{a}^{t_{0}+h}\frac{f(s)}{h}ds  -
  \int_{t_{0}}^{t_{0} + h} \frac{f(t_{0})}{h} ds \|_{X}
  \\
  & = \frac{1}{h} \| \int_{t_{0}}^{t_{0} + h}[f(s) - f(t_{0})]ds \|_{X}, \qquad
  \text{Lemma \ref{lem:int-splitting}}
  \\
  & \le \frac{1}{h} \int_{t_{0}}^{t_{0} + h} \| f(s) - f(t_{0})
  \|_{L^{\infty}\left( [t_{0}, t_{0} + h], X \right)}
  \\
  & = \| f(s) - f(t_{0})
  \|_{L^{\infty}\left( [t_{0}, t_{0} + h], X \right)}
  \\
  & = \sup_{0 \le k \le 1} \| f(t_{0} + kh) - f(t_{0})
  \|_{X}.
\end{split}
\end{equation*}
%
%
Note that since $f$ is continuous on $[a,b]$, and $[a,b]$ is compact, it follows
that $f$ is uniformly continuous on $[a,b]$. Hence, for fixed $\delta > 0$,
there exists $\ee_{\delta} > 0$ such that for $h < \ee_{\delta}$, we have
%
%
\begin{equation*}
\begin{split}
  \| f(t_{0} + kh) - f(t_{0}) \|_{X} < \delta, \ \text{for all } \  0 \le k \le 1.
\end{split}
\end{equation*}
%
%
Hence
%
%
%
\begin{equation*}
\begin{split}
  \sup_{0 \le k \le 1} \| f(t_{0} + kh) - f(t_{0}) \|_{X} < \delta, \quad h <
  \ee_{\delta}.
\end{split}
\end{equation*}
%
%
Since $\delta$ can be chosen arbitrarily small, we conclude that
%
\begin{equation*}
\begin{split}
  \lim_{h \to 0} \sup_{0 \le k \le 1} \| f(t_{0} + kh) - f(t_{0})
  \|_{X} = 0,
\end{split}
\end{equation*}
%
%
concluding the proof.
\end{proof}
%
%
%
%
%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				 Contraction Mapping Theorem
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\section{Contraction Mapping Lemma}
\begin{definition}
  Let $\left( X, d \right)$ be a metric space. A mapping $T: X \to X$ is called a
\emph{contraction} if there exists an $\alpha$, $0 \le \alpha <1$ such that
%
%
\begin{equation*}
	\begin{split}
		d(Tx, Ty) \le \alpha d(x,y), \qquad \forall x, y \in X.
	\end{split}
\end{equation*}
%
\end{definition}
%
\begin{framed}
\begin{remark}
	Observe that a contraction mapping is always continuous.
\end{remark}
\end{framed}
%
%
\begin{framed}
\begin{example}
	The function $T(x) = 0.1x^2$ defines a contraction mapping in the set 
	$X = [-4, 4]$ equipped with the metric $d(x,y) = |x-y|$. 
\end{example}
\end{framed}
	%
	%
	%
	%
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%
	%
	%				Banach Space Fixed Point Theorem 
	%
	%
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%
	%
	\begin{lemma}[Contraction Mapping Lemma]
		\label{lem:fixed-point}
	Let $(X,d)$ be a complete metric space, and $T: X \to X$ a contraction
	mapping. Then $T$ has a unique fixed point in $X$. That is, there is a unique
	point $x^* \in X$ such that $Tx^* = x^*$. Furthermore, if $x_0$ is any point
  in $X$, and we define the sequence $x_{n+1} = Tx_n$, then $x_n \xrightarrow{X} x^*$ as $n
	\to \infty$.
	\end{lemma}
	%
	%
  \begin{proof} First we show uniqueness. If $x^*$ and $x^{**}$ are two fixed
	points, then
	%
	%
	\begin{equation*}
		\begin{split}
			d(x^*, x^{**}) = d(Tx^*, Tx^{**}) \le \alpha d(x^*, x^{**}) \implies d(x^*,
			x^{**}) = 0 \implies x^* = x^{**}.
		\end{split}
	\end{equation*}
	%
	%
To prove existence, we observe that since $X$ is complete it suffices to show
that $x_n$ is Cauchy. A repeated application of the
contraction inequality gives
%
%
\begin{equation*}
	\begin{split}
		d\left( x_{n+1},x_n \right)
		& = d\left( Tx_n, Tx_{n-1} \right)
		\\
		& \le \alpha d\left( x_n, x_{n-1} \right)
		\\
		& \le \alpha^2 d\left( x_{n-1}, x_{n-2} \right)
		\\
		& \cdots
		\\
		& \le \alpha^n d\left( x_1, x_0 \right).
	\end{split}
\end{equation*}
%
%
Hence
%
%
\begin{equation*}
\begin{split}
  d\left( x_{n+k},x_n \right)
  & \le (\alpha^{n } +\alpha^{n+1} + \cdots +
  \alpha^{n+k-2} + \alpha^{n+k-1})d(x_{1}, x_{0}) 
  \\
  & = \alpha^{n}(1 + \alpha + \cdots + \alpha^{k-2} + \alpha^{k-1})
  \\
  & \le \alpha^{n}\left( \frac{1}{1 - \alpha} \right)
  \\
  & \to 0 \ \text{as} \ n \to \infty
\end{split}
\end{equation*}
%
%
since $0 \le \alpha < 1$. 
\end{proof}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%				 Proof of ODE Theorem
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\section{Proof of Metric Space ODE Theorem}
	%
	%
	Since $f(t)$ is Lipschitz continuous on $E$ for $t \in (-a, a)$, it is
	continuous on $E$. Hence, using the theory of metric space integration
  developed earlier and the fundamental theorem of calculus,
  one can check that the initial value problem
  \eqref{ode-thm-eq}-\eqref{ode-thm-init-data} is equivalent to the
	integral equation
	%
	%
	\begin{equation*}
		\begin{split}
			u(t) = \vp + \int_0^t f(s, u(s) ) \ ds.
		\end{split}
	\end{equation*}
	%
	%
	%
	%
	Let $[-h, h] \subset [-a/2, a/2]$ be a closed interval, with $t \in [-h, h]$,
	and $r$ chosen such that
	$$B_r(\vp) \doteq \left\{ u \in X: d(\vp, u) \le r \right\}$$
	is a subset of $E$. Define 
	$$V_h = \left\{ \text{all maps} \; \;  v: [-h, h]
    \to B_r(\vp)\right\}.$$ Then $(V_h, \mathfrak{d})$ is a complete metric space
    where the metric $\mathfrak{d}$ is defined by
    $$\mathfrak{d}(v_{1}, v_{2}) = \sup_{s \in [-h,
    h]} d[v_1(s),v_2(s)].$$ 
    We shall also use the notation
    %
    %
    \begin{equation*}
    \begin{split}
    ||| v ||| = \sup_{s \in [-h,
    h]} d[v(s),0]. 
    \end{split}
    \end{equation*}
    %
    %
    Let $T$ be a map
	acting on $V_h$ via the relation $$Tv(t) = \vp + \int_0^t f(s, v(s) ) \ ds.$$
	Recalling \autoref{lem:fixed-point}, we see that to complete the proof it will be enough to show that $T$ is a contraction on
	$V_h$, for suitably small $h >0$. First, note that for $v \in V_h$, we have
	%
	%
\begin{equation}
	\label{cont-map-into}
	\begin{split}
		| | | Tv - \vp| | |
		& = | | | \int_0^t f(s, v(s) ) \ ds | | |
		\\
    & \le  \int_0^{|t|} | | | f(s, v(s) ) | | | ds
    \end{split}
    \end{equation}
To estimate the integrand, we recall that $f(t, x)$ is continuous in the time
variable in the interval $(-a, a)$. Hence, for $t \in [-a/2, a/2]$ and fixed $x
\in E$, we have
%
%
\begin{equation*}
\begin{split}
d(f(t, x), 0) \le M
\end{split}
\end{equation*}
%
%
for some constant $M > 0$. Using this and the Lipschitz continuity of $f(t, x)$
in the spatial variable on $E$, we see that
%
%
\begin{equation*}
\begin{split}
| | | f(s, v(s) ) | | | 
& \le | | | f(s, v(s)) - f(s, v(0)) ||| + ||| f(s, v(0)) |||
\\
& \le c \sup_{s \in [-h, h]}  d(v(s), v(0)) +  M
\\
& \le 2cr + M.
\end{split}
\end{equation*}
%
%
Substituting this relation into \eqref{cont-map-into}, we see that
\begin{equation*}
  \begin{split}
| | | Tv - \vp| | |
& \le 
\int_0^{|t|} [2cr + M ] ds
    \\
    & \le  |t| [ 2cr + M]
		\\
    & \le  h [ 2cr + M].
\end{split}
\end{equation*}
%
%
%
Choosing $h \le 1/[2cr + M]$, it follows that $T: V_h \to V_h$. 
%Since $[-h, h] \subset (-a, a)$, we can find a compact set $C$ such that $(-h,
%h) \subset C \subset (-a, a)$. Since $f$ is a continuous function of two
%variables, $f( (C \times K) )$ is compact, and so \eqref{cont-map-into} gives
%the estimate
%%
%%
%\begin{equation*}
%	\begin{split}
%		| | | Tv | | | \le \|u_0\|_X + Mh < \infty
%	\end{split}
%\end{equation*}
%
%
Next, note that for any two points $v_1, v_2 \in
V_h$, we have
%
%
\begin{equation}
	\label{cont-part-1}
	\begin{split}
		| | | Tv_2 - Tv_1 | | | 
		& = | | | \int_0^t \left[ f(s, v_2(s) ) - f(s, v_1 (s) ) \right]ds | | |
		\\
    & \le \int_0^{|t|} | | | f(s, v_2(s) ) - f(s, v_1 (s) ) | | | ds
		\\
    & = \int_0^{|t|} \sup_{s \in [-h, h]} d[f(s, v_1(s) ), f(s, v_2 (s) )] \ ds
		\\
    & \le c \int_0^{|t|}  \sup_{s \in [-h, h]} d[v_1(s), v_2 (s)] \
		ds
		\end{split}
\end{equation}
%
%
where the last step follows from \eqref{stronger-ode}. Hence
\begin{equation*}
	\begin{split}
		| | | Tv_2 - Tv_1 | | | 
		& \le c h \sup_{s \in [-h, h]} d[v_1(s), v_2 (s)]
		\\
		& = ch |||v_2 - v_1|||.
	\end{split}
\end{equation*}
%
%
Restricting $h \le 1/(2c)$, we obtain
\begin{equation*}
	\begin{split}
		| | | Tv_2 - Tv_1 | | | & \le \frac{1}{2} | | | v_2 - v_1 | | |. 
	\end{split}
\end{equation*}
Hence, for $h \le \min\left\{1/(2c), 1/[2cr + M] \right\}$, $T$ is a
contraction on $V_h$. This completes the proof. \qed
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                Dependence on Params
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\section{Regularity for Solutions to ODEs} 
\label{sec:dep-param}
%
%
Following Taylor \cite{Taylor:1995kx}, let $X \subset \rr$ be an open subset,
$U \subset C^{k}(X)$ be an open subset, where $k \in \mathbb{N}\cup \omega$, and
$F: U \to C^{k}(X)$. We endow $C^{k}(X), k \in \mathbb{N}$ with the metric
induced by its seminorms
%
%
\begin{equation*}
\begin{split}
d(f, g) \doteq \sum_{k \in \mathbb{N}} \sum_{j \in \mathbb{N}} 2^{-j -k} \frac{|
f-g |_{j, k}}{1 + | f-g |_{j, k}}
\end{split}
\end{equation*}
%
where
%
%
\begin{gather*}
|h|_{j,k}  = \sup_{x \in K_j} \sum_{k \in \mathbb{N}} |d^{k}h(x)|,
\\
\{ K_{j} \} \ \text{a family of compact subsets of} \ X \  \text{covering} \ X
\end{gather*}
%
%
%
and equip the set of real analytic functions $C^{\omega}(X)$ with the
metric
%
%
\begin{equation*}
\begin{split}
\rho(f,g) \doteq \sup_{x \in X} |f(x) - g(x)|.
\end{split}
\end{equation*}
%
%
Consider the non-autonomous system
%
%
\begin{gather}
  \label{aa}
\frac{dy}{dt} = F(y(x,t), t),
\\
y(0)= y_{0}(x) \in C^{k}, \quad x \in \ci \ \text{or} \ \rr,t \in \rr.
\label{bb}
\end{gather}
%
Letting $z = (y(x,t), t)$, we get
%
%
\begin{equation*}
\begin{split}
\frac{dz}{dt}  
& = \left (\frac{dy}{dt}, 1 \right )
\\
& = \left( F(y(t), t), 1 \right)
\\
& = \left( F(z), 1 \right)
\\
& \doteq G(z).
\end{split}
\end{equation*}
%
%
Hence, without loss of generality, we may restrict our attention to the
autonomous system
%
%
\begin{gather}
\frac{dy}{dt} = F\left( y(x,t) \right)
\label{ode-eq}
\\
y(0) = y_{0}(x), \quad x \in \ci \ \text{or} \ \rr
\label{ode-init-data}
\end{gather}
%
%
%
for which we shall prove the following.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%                dep on init cond
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%
\begin{corollary}[Regularity With Respect to Parameters]
  \label{cor:reg-param}
  Let $U \subset C^{k}$ be an open subset, $ k \in \mathbb{N} \cup \omega$.  
Consider the ode
\begin{gather}
  \label{ode-param-naut}
\frac{dy}{dt} = F \left [ y(x, \tau, t), \tau \right]
\\
y(0) = y_{0}(x), \quad \tau, x \in \ci \ \text{or} \ \rr, t \in \rr
\label{ode-param-init-naut}
\end{gather}
%
%
where $F: U \times \rr  \to C^{k}$ is Lipschitz. If $y_{0} \in C^{k}$, then
there exists an 
open set $I \subset \rr$
such that the ivp \eqref{ode-param-naut}-\eqref{ode-param-init-naut}
admits a unique solution $y(x, \tau, t)$ for $t \in I$. In addition,
this solution is $C^{k}$ in $x$ and $\tau$.
%
\end{corollary}
%
\begin{proof}
  Without loss of generality, we restrict our attention to the homogeneous ivp
\begin{gather}
  \label{ode-param}
\frac{dy}{dt} = F \left [ y(x, \tau, t) \right]
\\
y(0) = y_{0}(x) \in C^{k}, \quad \tau, x \in \ci \ \text{or} \
\rr, t \in \rr.
\label{ode-param-init}
\end{gather}
  %
  The idea will be to view the couple
  $(x, \tau)$ as the spatial component of the ode
  \eqref{ode-param}-\eqref{ode-param-init}.
  To make this rigorous, let $z = (x, \tau)$. Then
  \eqref{ode-param}-\eqref{ode-param-init} is equivalent to the system
  %
  %
  \begin{gather*}
    \frac{d}{dt}(y, z) = \left( F[y(z,t)], \vec{0} \right), \quad \vec 0 =
    (0, 0)
  \\
  (y, z)(0) = \left ( y_{0}(x), \tau \right ).
  \end{gather*}
  %
  %
  Letting $Y = (y,z)$, and $G: U \times \left\{ \vec{0} \right\} 
  \to C^{k} \times \left\{ \vec{0} \right\}$ be defined
  by $G(u, \vec{0}) = \left( F(u), \vec{0} \right)$, we obtain
  %
  %
  \begin{gather*}
      \frac{dY}{dt} = G\left[ Y(z,t) \right]
      \\
      Y(0) = Y_{0}(z)
  \end{gather*}
%
where $Y_{0}(z) = Y_{0}(x, \tau)$ is a constant function of $\tau$. 
Applying Theorem \ref{ode-thm},  we obtain a solution $Y(z,t)$ which is
$C^{k}$ in $z$ locally in time. Since $z = (x, \tau)$, this implies that $Y(z,t)$ is
$C^{k}$ in $x$ and $\tau$, concluding the proof. 
%
\end{proof}
%
%
We are now prepared to prove the following. 
\begin{theorem}
  Let $U \subset C^{k}$ be an open subset, $k \in \mathbb{N} \cup \omega$. Suppose $G: U \times \rr
  \to C^{k}$
  is Lipschitz. If $y_{0} \in C^{k}$, then there exists an open set $I \subset
  \rr$
such that the ivp 
\begin{gather}
\frac{dy}{dt} = G\left( y(x,t), t \right)
\\
y(0) = y_{0}(x), \quad x \in \ci \ \text{or} \ \rr,t \in \rr
\end{gather}
%
%
admits a unique solution $y(x,t)$ for $t \in I$. In addition,
this solution is $C^{k}$ in $x$ and $t$.
\label{thm:reg-result}
\end{theorem}
%
%
\begin{proof}
Without loss of generality, we restrict our attention to the homogeneous ivp
\begin{gather}
\frac{dy}{dt} = G\left( y(x,t) \right)
\label{cc}
\\
y(0) = y_{0}(x), \quad x \in \ci \ \text{or} \ \rr,t \in \rr.
\label{dd}
\end{gather}

  We choose $F: U \times \rr \to C^{k}$ in \eqref{ode-param-naut}
  such that it is $C^{k}$ and satisfies 
  %
  %
  \begin{equation}
    \label{hjj}
  \begin{split}
    F\left[ y, \tau \right] = \tau F \left[ y, 1 \right].
  \end{split}
  \end{equation}
  %
  Note that \eqref{hjj} does not violate our assumption of $k$-differentiability
  for $F$, since
%
%
\begin{equation*}
\begin{split}
  DF\left[ y, \tau \right]
  & = \left( D_{y}(y, \tau) F, D_{\tau} F[y, \tau] \right)
  \\
  & = (  D_{y} \{\tau F[y, 1] \}, D_{\tau} \{F[y, 1] \} ) 
  \\
  & = ( \tau D_{y} F[y, 1], F[y, 1]).
\end{split}
\end{equation*}
%
%
Then if $y(x, t, \tau)$ is a solution to
\eqref{ode-param-naut}-\eqref{ode-param-init-naut}, we have $y(x, \tau, t ) =
y(x, 1, \tau t)$. To see this, we compute
%
%
\begin{equation*}
\begin{split}
\frac{d}{dt}\left[ y(x, 1, \tau t) \right]
& = \tau y'(x, 1, \tau t)
\\
& = \tau F\left( 1, y(x, 1, \tau t) \right)
\\
& = F(\tau, y(x, 1, \tau t)).
\end{split}
\end{equation*}
%
%
That is, $y(x, 1, \tau t)$ is a solution
\eqref{ode-param-naut}-\eqref{ode-param-init-naut}. By uniqueness, $y(x, \tau, t) =
y(x, 1, \tau t)$. But formally, by the chain rule, we have
%
%
\begin{equation}
  \label{chain-comp}
\begin{split}
\frac{d^{k}y}{d \tau^{k}}(x, \tau, t) 
& = \frac{d}{d \tau^{k}}\left[ y(x, 1, \tau t) \right]
\\
& = \tau^{k} \frac{d^{k}y}{dt^{k}}(x, 1, \tau t) + \dots
\end{split}
\end{equation}
%
%
By Corollary \ref{cor:reg-param}, $y$ is $C^{k}$ in $\tau$. Hence, from
\eqref{chain-comp}, we conclude that $y$ is $C^{k}$ in $t$. $C^{k}$
differentiability in $x$ follows from Corollary \ref{cor:reg-param}.
Running an induction, one obtains the corresponding result
for the case $k = \infty$. The case $k = \omega$ is identical to the case
$k \in \mathbb{N}$. Lastly, for any given $G$,
we can find $F$ satisfying \eqref{hjj} and such that
$G(\cdot) = F(\cdot, 1)$. This concludes the proof.
%
\end{proof}
%
%
\section{Differentiation in Banach Spaces}
We remark that the theory presented below can be extended to arbitrary
topological vector spaces with a topology induced by a metric (in particular,
Fr\'echet spaces) by replacing norms with metrics in what follows.
\begin{definition}
	\label{def:diff}
	Let $X,Y$ be Banach spaces over the real numbers, $U \subset X$ open,
  and consider the map $f: U \to Y$.
	Then $f$ is differentiable at $x_0 \in U$ if there
	is a continuous linear map $Df(x_0): X \to Y$ such that
	%
	%
	%
	%
	\begin{equation}
		\label{diff-limit}
		\begin{split}
			\lim_{h \to 0} \frac{\|f(x_0+ h) - f(x_0) -
			Df(x_0)(h) \|_Y}{\|h\|_{X}} = 0.
		\end{split}
	\end{equation}
	%
	%
	This map, which we call the \emph{total derivative} of $f$ at $t_0$, is 
	unique. If $Df(x_0)$ exists for all $x_0 \in U$,
	then we say that $f$ is
	\emph{differentiable} in $U$. If $f$ is differentiable in $U$, and 
	$\|Df(x_0 + h) - Df(x_0) \|_Y \to 0$ as $\|h\|_{X} \to 0$ for all $x_0 \in U$,
	then we say that $f$ is \emph{continuously differentiable in $U$}. If $X, Y$
  are Banach spaces over the complex numbers, we say that $f$ is
  \emph{holomorphic} (or \emph{continuously holomorphic}) in $U$.
\end{definition}
	%
  %
  %
  \begin{framed}
  %
  %
  \begin{remark}
    Equivalently, $f$ is differentiable at $x_{0}$ is there exists a continuous
    linear map $Df(x_{0}): X \to Y$ such that
    %
    %
    \begin{equation*}
    \begin{split}
      f(x_{0} + h) = f(x_{0}) + Df(x_{0}) \circ h + o(\| h \|_{X}).
    \end{split}
    \end{equation*}
    %
    To see this, suppose
    %
    %
    \begin{equation*}
    \begin{split}
      \lim_{h \to \infty} \frac{\| f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h
      \|_{Y}}{\| h \|_{X}} = 0.
    \end{split}
    \end{equation*}
    %
    %
    Then we can find $\delta > 0$ such that
    %
    %
    \begin{equation*}
    \begin{split}
    \frac{\| f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h
      \|_{Y}}{\| h \|_{X}}  < \ee
    \end{split}
    \end{equation*}
    %
    %
    for all $h \in X$ with $\| h \|_{X} < \delta$. Hence
    %
    %
    \begin{equation*}
    \begin{split}
      \| f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h \|_{Y} < \ee \| h
      \|_{X}.
    \end{split}
    \end{equation*}
    %
    %
    This implies
    %
    %
    \begin{equation*}
    \begin{split}
      f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h = g, \quad g \in Y, \ \| g
      \|_{Y} < \ee \| h \|_{X}.
    \end{split}
    \end{equation*}
    %
    %
    Hence, 
    %
    %
    \begin{equation*}
    \begin{split}
      f(x_{0} + h) 
      & = f(x_{0}) + Df(x_{0}) \circ h + g
      \\
      & =  f(x_{0}) + Df(x_{0})\circ h + o(\| h \|_{X}).
    \end{split}
    \end{equation*}
    %
    %
    For the reverse direction, if
    %
    %
    \begin{equation*}
    \begin{split}
      f(x_{0} + h) = f(x_{0}) + Df(x_{0}) \circ h + o(\| h \|_{X})
    \end{split}
    \end{equation*}
    %
    %
    then
    %
    %
    \begin{equation*}
    \begin{split}
      \| f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h \|_{Y} = o(\| h
      \|_{X})
    \end{split}
    \end{equation*}
    %
    %
    which implies
    %
    %
    \begin{equation*}
    \begin{split}
      \lim_{h \to \infty} \frac{\| f(x_{0} + h) - f(x_{0}) - Df(x_{0}) \circ h
      \|_{Y}}{\| h \|_{X}}  = \lim_{h \to \infty} \frac{o(\| h \|_{X})}{\| h
      \|_{X}} = 0.
    \end{split}
    \end{equation*}
    %
    %
    %
  \label{rem:equiv-def}
  \end{remark}
  %
  %
  \end{framed}
  %
  %
  \begin{framed}
	\begin{remark}
		\label{rem:usual-diff}
		Consider the map $f: \rr \to \rr$. Then \autoref{def:diff} 
		coincides with the usual definitions of
		differentiability and continuous differentiability for maps
		from $\rr $ to $\rr$.
		To see this, assume $f$ is differentiable at $x_0$.
		Let us first verify that the map  $D(x_0): \rr ~\to~\rr$
		defined by $Df(x_0)(x) =
		xf'(x_0)$ is the total derivative of $f$. Assume without loss of generality
		that $h \to 0^+$. Then
		%
		%
		\begin{equation}
			\label{2}
			\begin{split}
				 \lim_{h \to 0^+} \frac{| f( x_0 + h) - f(x_0) -
				Df(x_0)(h) |}{|h|}
				 & = \lim_{h\to 0^+} \left |\frac{f(x_0+h) -
				f(x_0)}{h} - \frac{Df(x_0)(h)}{h}  \right |
				\\
				 & =\lim_{h \to 0^+} \left |\frac{f(x_0+h) - f(x_0)}{h} -
				f'(x_0) \right | = 0.
			\end{split}
		\end{equation}
		%
		%
%
%
For any $a \in \rr$, define the map $T_{a} \in L(\rr , \rr)$ by
$T_{a}(x) = ax$. Then the map $a \mapsto T_a$ is an isometric
isomorphism from $\rr$ to $L( \rr, \rr)$. Hence, 
we may identify $f'(x_0)$ with $T_{f'(x_0)} = Df(x_0)$,
which by \eqref{2} is the total derivative of $f$.  Using this identification,
it follows that $f$ is continuously
differentiable in $\rr$ if and only if $f'$ is a continuous function of
$x_0$, for all $x_0 \in \rr$. \qed
%
\end{remark}
\end{framed}
%
%
In general, for an arbitrary Banach space $X$, open interval $(a,b) \subset
\rr$, and map $f:(a,b) \to X$, we can identify $Df(x_0)$ with an
element of $X$ via the following.
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%			Lemma Isometry	
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{lemma}
	\label{lem:isometry} Let $(a,b) \subset \rr$ be an open interval, $X$ a Banach
	space, with $x \in X$. Define the map $T_x \in L\left ( \rr , X \right )$ by
	$T_x(t_0) = x t_0$. Then the map $x \mapsto T_x$ is an
	isometric isomorphism from
	$X$ to $L(\rr , X)$. 
\end{lemma}
%
%
\begin{proof} Note that 
%
%
\begin{equation*}
	\begin{split}
		| | | T_x | | |
		& = \sup_{|t_0| = 1} \| T_x (t_0) \|_X
		= \| x t_0\|_X
		= \|x\|_X.
	\end{split}
\end{equation*}
%
%
Hence, the map $x \mapsto T_x$ is an isometry from $X$ into $L(\rr,
X)$. It remains to show that it is onto. Let $V \in L( \rr, X)$. Then
by linearity
%
%
\begin{equation*}
	\begin{split}
		V(t_0) = V(1)t_0. 
	\end{split}
\end{equation*}
%
%
Hence, $V = T_{V(1)}$, completing the proof. 
\end{proof}
%
%
Applying the lemma, we see that if $Df(t_0)$ exists for a map $f: (a,b) \to X$,
then it can be viewed as an
element of $X$. Similarly, if $Df(t_0)$ exists for all $t_0 \in (a,b)$, then
we may view the map $t_0 \to Df(t_0)$ as an
element of $L( \rr, X)$. Hence, for a
map $f:(a,b) \to X$, we see that the following is an equivalent
reformulation of \autoref{def:diff}. 
\begin{definition}
	\label{def:diff-simp}
	Let $X$ be Banach space, $(a,b) \subset \rr$ an open interval, and
	consider the map $f: (a,b) \to X$.
	Then $f$ is \emph{differentiable at $t_0$} if there exists a map
	$f': \rr \to X$ such that 
	%
	%
	%
	%
	\begin{equation}
		\label{diff-limit-simp}
		\begin{split}
			\lim_{h \to 0} \| \frac{f(t_0+ h) - f(t_0) 
			 }{h} - f'(t_0) \|_X = 0.
		\end{split}
	\end{equation}
	%
	%
	We call $f'(t_0)$ the \emph{derivative of $f$ at $t_0$}.
	If \eqref{diff-limit-simp}
	holds for all $t_0 \in (a,b)$, then we say $f$ is \emph{differentiable in
	$(a,b)$}, and call $f'$ the
	\emph{derivative of $f$ in $(a,b)$}.  
\end{definition}
\begin{framed}
\begin{example}
Let $f: (a,b) \to \rr^2$ be defined by $f(t) = (1, t^2)$. Then $Df(1)$ maps
$(a,b)$ to $\rr$ by the relation $Df(1)(t) = (0, 2t) = t[0, 2]$. Hence, $Df(1)$ is the $1
\times 2$ matrix $[0,2]$, which we may also view as the point $(0,2) \in \rr^2$.
That is, $f'(1) = (0,2)$. Similarly, $f'(t) = (0,2t)$.
\end{example}
\end{framed}

Lastly, we include the following.
%
%
\begin{proposition}
    (Chain Rule) Let $X,Y,Z$ be Banach spaces, $f: X \to Y$ and $g: Y \to Z$
    continuously differentiable maps. Then for all $x_0 \in X$ we have
    %
    \begin{equation*} (g \circ f)' (x_0) = g'(f(x_0)) \circ (f'(x_0)).
		\end{equation*} 
    %
	\end{proposition}
  \begin{proof} Since $f$ and $g$ are continuously differentiable, we can write
			\begin{equation*}
				f(x_0 + s) = f(x_0) + f'(x_0)(s) + o_{1}(s)
			\end{equation*}
			and
      \begin{equation*}
				g(x_0 + t) = g(x_0) + g'(x_0)(t)+ o_{2}(t).
			\end{equation*}
						Hence
			\begin{equation}
        \label{pre-order}
				\begin{split}
					h(x_0 + s) &= g(f(x_0 +s)
					\\
					&= g(f(x_0) + f'(x_0)(s) + o_{1}(s))
					\\
					&= g(f(x_0)) + g'(f(x_0)) \circ [f'(x_0)(s) + o_{1}(s)] 
					+ o_{2}(f'(x_0)(s) + o_{1}(s))
					\\
					&= g(f(x_0)) + g'(f(x_0)) \circ f'(x_0)(s) +
					g'(f(x_0)) \circ o_{1}(s) + o_{2}(f'(x_0)(s) + o_{1}(s)).
				\end{split}
			\end{equation}
      Since $f'(x_0)$
			and $g'(f(x_0))$ are continuous linear operators, we have
			\begin{equation*}
				\begin{split}
         &  f'(x_0)(s)
           = o_{3}(s)
					\\
					& g'(f(x_0))(t) = o_{4}(t).
				\end{split}
			\end{equation*}
      Therefore,
      %
      %
      \begin{equation*}
        \begin{split}
          g'(f(x_0)) \circ o_{1}(s)
          & = o_{4}(o_{1}(s))
          \\
          & = o_{5}(s)
        \end{split}
      \end{equation*}
      %
      %
      and
      %
      %
      \begin{equation*}
      \begin{split}
      o_{2}(f'(x_0)(s) + o_{1}(s))
      & = o_{2}(o_{3}(s) + o_{1}(s))
      \\
      & =o_{6}(s).
      \end{split}
      \end{equation*}
      %
      %
			Recalling \eqref{pre-int} and substituting, we conclude that
			\begin{equation*}
				\begin{split}
				h(x_0 + s) = g(f(x_0)) + g'(f(x_0))(f'(x_0)(s)) +
				o(s)
        \end{split}
        \end{equation*}
			 completing the proof. 
   \end{proof}
%
%
%
%
%

